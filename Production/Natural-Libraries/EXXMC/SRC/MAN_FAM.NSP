* >Natural Source Header 000000
* :Mode S
* :CP ISO_8859-1:1987
* :LineIncrement 10
* <Natural Source Header
* Web Application Online
* Member Information module
*
********************************************************
*        MODIFICATION LOG
********************************************************
* USER   DATE      TAG  REASON
* YAK    03092009       Initial Creation
********************************************************
*
* DEFINE DATA PARAMETER
*
define data
*
LOCAL USING PARSER-X
LOCAL USING GPRA0003
LOCAL
1 PROCESS-NAME      (A) DYNAMIC
1 REQUEST-DATA      (A) DYNAMIC
1 RESPONSE-DATA     (A) DYNAMIC       /* Out
1 RETURN-MESSAGE    (A78)
*
END-DEFINE
*
RESET RESPONSE-DATA
COMPRESS
'<FamilyMembers>'
  '<ActionType>0</ActionType>'
  '<CN>80642</CN>'
'</FamilyMembers>'
*
* '<FamilyMembers>'
*   '<ActionType>2</ActionType>'
*   '<ErrorCode>0</ErrorCode>'
*   '<UserID />'
*   '<CN>57489</CN>'
*   '<FamilyMemberList>'
*     '<FamilyMemberInfo>'
*       '<CN>0</CN>'
*       '<ContactID>146670</ContactID>'
*       '<FirstName>RACHEL</FirstName>'
*       '<MiddleName>A</MiddleName>'
*       '<LastName>PINCINCE</LastName>'
*       '<Prefix>MS</Prefix>'
*       '<Suffix>test</Suffix>'
*       '<FullName>Rachel A Pincince</FullName>'
*       '<DateOfBirth>19600305</DateOfBirth>'
*       '<GenderCode>F</GenderCode>'
*       '<SSN>426-17-9687</SSN>'
*       '<RelationshipCode>K</RelationshipCode>'
*       '<NewRelationshipCode>K</NewRelationshipCode>'
*       '<CurrentSpouseDateOfMarriage>0</CurrentSpouseDateOfMarriage>'
*       '<CurrentSpouseDateOfDivorce>0</CurrentSpouseDateOfDivorce>'
*       '<FormerSpouseDateOfMarriage>0</FormerSpouseDateOfMarriage>'
*       '<FormerSpouseDateOfDivorce>0</FormerSpouseDateOfDivorce>'
*     '</FamilyMemberInfo>'
*   '</FamilyMemberList>'
* '</FamilyMembers>'
*
* '<FamilyMembers>'
*   '<ActionType>2</ActionType>'
*   '<ErrorCode>0</ErrorCode>'
*   '<UserID />'
*   '<CN>116493</CN>'
*   '<FamilyMemberList>'
*     '<FamilyMemberInfo>'
*       '<CN>112056</CN>'
*       '<ContactID>291272</ContactID>'
*       '<FirstName>LESLIE DALE</FirstName>'
*       '<MiddleName></MiddleName>'
*       '<LastName>OWEN</LastName>'
*       '<Prefix>MR</Prefix>'
*       '<Suffix />'
*       '<DateOfBirth>19560211</DateOfBirth>'
*       '<GenderCode>M</GenderCode>'
*       '<SSN>225-86-3273</SSN>'
*       '<RelationshipCode>S</RelationshipCode>'
*       '<NewRelationshipCode>S</NewRelationshipCode>'
*       '<CurrentSpouseDateOfMarriage>19921112</CurrentSpouseDateOfMarriage>'
*       '<CurrentSpouseDateOfDivorce>0</CurrentSpouseDateOfDivorce>'
*       '<FormerSpouseDateOfMarriage>0</FormerSpouseDateOfMarriage>'
*       '<FormerSpouseDateOfDivorce>0</FormerSpouseDateOfDivorce>'
*     '</FamilyMemberInfo>'
*   '</FamilyMemberList>'
* '</FamilyMembers>'
*
* '<FamilyMembers>'
*   '<ActionType>2</ActionType>'
*   '<ErrorCode>0</ErrorCode>'
*   '<UserID />'
*   '<CN>112056</CN>'
*   '<FamilyMemberList>'
*     '<FamilyMemberInfo>'
*       '<CN>0</CN>'
*       '<ContactID>291274</ContactID>'
*       '<FirstName>Stephen</FirstName>'
*       '<MiddleName>H</MiddleName>'
*       '<LastName>Owen</LastName>'
*       '<Prefix />'
*       '<Suffix />'
*       '<DateOfBirth>19870508</DateOfBirth>'
*       '<GenderCode>M</GenderCode>'
*       '<SSN>215-25-4619</SSN>'
*       '<RelationshipCode>G</RelationshipCode>'
*       '<NewRelationshipCode>K</NewRelationshipCode>'
*       '<CurrentSpouseDateOfMarriage>0</CurrentSpouseDateOfMarriage>'
*       '<CurrentSpouseDateOfDivorce>0</CurrentSpouseDateOfDivorce>'
*       '<FormerSpouseDateOfMarriage>0</FormerSpouseDateOfMarriage>'
*       '<FormerSpouseDateOfDivorce>0</FormerSpouseDateOfDivorce>'
*     '</FamilyMemberInfo>'
*   '</FamilyMemberList>'
* '</FamilyMembers>'

* '<FamilyMembers>'
*   '<ActionType>2</ActionType>'
*   '<ErrorCode>0</ErrorCode>'
*   '<UserID>AAFMAA\member</UserID>'
*   '<CN>46414</CN>'
*   '<NoFamily>false</NoFamily>'
*   '<FamilyMemberList>'
*     '<FamilyMemberInfo>'
*       '<CN>0</CN>'
*       '<ContactID>109079</ContactID>'
*       '<FirstName>MONA</FirstName>'
*       '<MiddleName>E</MiddleName>'
*       '<LastName>SAND</LastName>'
*       '<Prefix>MS</Prefix>'
*       '<Suffix />'
*       '<FullName>Mona E Grizio</FullName>'
*       '<DateOfBirth>19741003</DateOfBirth>'
*       '<GenderCode>F</GenderCode>'
*       '<SSN>423-98-4079</SSN>'
*       '<RelationshipCode>K</RelationshipCode>'
*       '<NewRelationshipCode>K</NewRelationshipCode>'
*       '<CurrentSpouseDateOfMarriage>0</CurrentSpouseDateOfMarriage>'
*       '<CurrentSpouseDateOfDivorce>0</CurrentSpouseDateOfDivorce>'
*       '<FormerSpouseDateOfMarriage>0</FormerSpouseDateOfMarriage>'
*       '<FormerSpouseDateOfDivorce>0</FormerSpouseDateOfDivorce>'
*     '</FamilyMemberInfo>'
*   '</FamilyMemberList>'
* '</FamilyMembers>'

* '<FamilyMembers>
*   '<ActionType>2</ActionType>
*   '<UserID>AAFMAA\member</UserID>
*   '<CN>81699</CN>
*   '<NoFamily>false</NoFamily>
*   '<FamilyMemberList>
*     '<FamilyMemberInfo>
*       '<ContactID>225870</ContactID>
*       '<FirstName>JENNY</FirstName>
*       '<MiddleName>M</MiddleName>
*       '<LastName>Spence</LastName>
*       '<Prefix>MS</Prefix>
*       '<FullName>Jenny M Cooksey</FullName>
*       '<DateOfBirth>19780204</DateOfBirth>
*       '<GenderCode>F</GenderCode>
*       '<SSN>514-78-4711</SSN>
*       '<RelationshipCode>K</RelationshipCode>'
*       '<NewRelationshipCode>K</NewRelationshipCode>'
*     '</FamilyMemberInfo>'
*   '</FamilyMemberList>'
* '</FamilyMembers>'

INTO REQUEST-DATA LEAVING NO
*
 PROCESS-NAME := 'ManageFamilyInfo'
*
CALLNAT 'NATSERV0' PROCESS-NAME REQUEST-DATA RESPONSE-DATA
repeat
RETURN-MESSAGE := RESPONSE-DATA
WRITE RETURN-MESSAGE
if *length(response-data) > 78
 response-data := substr(response-data,79)
else
  escape bottom
end-if
end-repeat
END
